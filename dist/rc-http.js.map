{"version":3,"sources":["rc-http.js","rc-http-controller.js","tpls-http.js"],"names":["angular","module","component","transclude","controller","controllerAs","bindings","templateUrl","auto","service","method","url","config","params","data","model","onStart","onSuccess","onError","$scope","$element","$attrs","$transclude","$templateRequest","$injector","$log","rcHttp","this","$service","init","isPending","get_response","response","status","statusText","$onInit","isString","then","html","append","length","template","element","$compile","get","error","has","isUndefined","isObject","cache","extend","copy","send","http_instance","success","$response","e","$error","message","run","$templateCache","put"],"mappings":"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","file":"rc-http.js","sourcesContent":["(function(angular){\n    'use strict';\n\n\n    // Load module\n    var module = angular.module('rcHttp');\n\n\n    module.component( 'rcHttp',\n        {\n            transclude: true,\n            controller: 'rcHttpCtrl',\n            controllerAs: '$rcHttp',\n            bindings: {\n                templateUrl: \"<?\",\n                auto:       \"@?\",\n                service:    \"@\",\n                method:     \"@\",\n                url:        \"@\",\n                config:     \"<\",\n                params:     \"<?\",\n                data:       \"<\",\n                model:      \"=?\",\n                onStart:    \"&\",\n                onSuccess:  \"&\",\n                onError:    \"&\"\n        }\n    });\n\n})(angular);\n","(function(angular){\n  'use strict';\n\n  var module = angular.module('rcHttp');\n\n\n  module.controller('rcHttpCtrl', [\n      '$scope',\n      '$element',\n      '$attrs',\n      '$transclude',\n      '$templateRequest',\n      '$injector',\n      '$log',\n      function ( $scope, $element, $attrs, $transclude, $templateRequest, $injector, $log ) {\n\n      var rcHttp = this;\n      var $service;\n\n      function init() {\n\n          rcHttp.isPending = false;\n      }\n\n\n      function get_response(response) {\n\n          return {\n              data: response.data,\n              status: response.status,\n              statusText: response.statusText,\n          };\n      }\n\n      this.$onInit = function() {\n\n          //Get Template url or transclude if empty\n          $templateRequest(angular.isString(rcHttp.templateUrl) ? rcHttp.templateUrl : \"rc-http.tpl.html\").then(\n              function(html){\n\n                  //If no template url transclude with default empty template.\n                  if (!angular.isString(rcHttp.templateUrl)) {\n                      $element.append($transclude($scope, function () {}));\n                  }\n\n                  if (html.length) {\n                      var template = angular.element(html);\n                      $element.append(template);\n\n                      var $compile = $injector.get('$compile');\n                      $compile(template)($scope);\n                  }\n              },\n              function (error) {\n\n              }\n          );\n\n          //Set default service\n          if (!angular.isString(rcHttp.service) || !rcHttp.service.length || !$injector.has(rcHttp.service)) {\n              rcHttp.service = '$http';\n          }\n\n          //Load Service by inject\n          $service = $injector.get(rcHttp.service);\n\n          //Set default method\n          if (!angular.isString(rcHttp.method) || !rcHttp.method.length || typeof $service[rcHttp.method] !== 'function') {\n              rcHttp.method = 'get';\n          }\n\n          if ( !angular.isString(rcHttp.url) || !rcHttp.url.length) {\n              rcHttp.url = false;\n          }\n\n          rcHttp.auto = angular.isUndefined(rcHttp.auto) || rcHttp.auto === true ? true : false;\n          rcHttp.data = angular.isObject(rcHttp.data) ? rcHttp.data : {};\n          rcHttp.config = angular.isObject(rcHttp.config) ? rcHttp.config : {cache: true};\n\n          if (angular.isObject(rcHttp.params)) {\n              angular.extend(rcHttp.config.params, rcHttp.params);\n          }\n\n          //Call Request\n          if (rcHttp.auto === true) {\n\n              rcHttp.response = rcHttp.data.response ? angular.copy(rcHttp.data.response) : {};\n\n              if ( rcHttp.service !== '$http' || (rcHttp.service === '$http' && rcHttp.url) ) {\n                  rcHttp.send();\n              }\n          }\n\n\n      };\n\n\n      this.send = function(config) {\n\n          try {\n\n              rcHttp.isPending = true;\n              rcHttp.onStart();\n\n              if (rcHttp.model) {\n                  rcHttp.config.data = rcHttp.model;\n              }\n\n              config = angular.isObject(config) ? config : angular.copy(rcHttp.config);\n              config.params = !config.params ? angular.copy(rcHttp.config.params) : config.params;\n              config.data = !config.data ? angular.copy(rcHttp.config.data) : config.data;\n\n              var http_instance;\n\n              //Resolve instance method type\n              switch($service[rcHttp.method]) {\n                  case 'get':\n                  case 'delete':\n                  case 'head':\n                  case 'jsonp':\n                      http_instance = $service[rcHttp.method](rcHttp.url, config);\n                      break;\n                  case 'post':\n                  case 'put':\n                  case 'patch':\n                      http_instance = $service[rcHttp.method](rcHttp.url, rcHttp.model, config);\n                      break;\n                  default: {\n                      if (!rcHttp.url) {\n                          http_instance = $service[rcHttp.method](rcHttp.model, config);\n                      }\n                      else {\n                          http_instance = $service[rcHttp.method](rcHttp.url, rcHttp.model, config);\n                      }\n                  }\n              }\n\n\n              http_instance.then(function(success) {\n\n                  rcHttp.response = get_response(success);\n\n                  rcHttp.onSuccess({ $response: rcHttp.response });\n                  rcHttp.isPending = false;\n              }, function(error) {\n\n                  rcHttp.response = get_response(error);\n\n                  rcHttp.onError({ $response: rcHttp.response });\n                  rcHttp.isPending = false;\n              });\n\n              return http_instance;\n          }\n          catch (e) {\n              $log.error(e);\n\n              rcHttp.onError({ $error: {message: 'Error send request rcHttp'} });\n              rcHttp.isPending = false;\n          }\n      };\n\n\n      init();\n\n  }]);\n\n})(angular);\n","angular.module('rcHttp').run(['$templateCache', function($templateCache) {$templateCache.put('rc-http.tpl.html','');}]);"],"sourceRoot":"dist"}